// Generated by CoffeeScript 1.3.3
(function() {

  define(["backbone", "ich"], function(Backbone, ich) {
    var $, EditView;
    $ = jQuery;
    EditView = Backbone.View.extend({
      el: $('body'),
      events: {
        "click": "editElement"
      },
      editElement: function(e) {
        var el,
          _this = this;
        el = e.target;
        return requirejs(["aloha"], function() {
          return Aloha.ready(function() {
            var editable;
            if ((($(el).text() != null) && $(el).text() !== "") || $(el).is('img')) {
              if (!$(el).parent().text().match("document.write")) {
                if ($(el).is('img')) {
                  editable = $(el).parent().addClass("editableClone");
                } else if ($(el).is('a')) {
                  editable = $(el).addClass("editableClone");
                } else {
                  editable = $(el).parent().addClass("editableClone");
                }
                e.preventDefault();
                return Aloha.jQuery(editable).aloha().focus();
              }
            }
          });
        });
      },
      render: function() {},
      initialize: function() {
        _.bindAll(this, "render", "editElement");
        return this.render();
      }
    });
    return EditView;
  });

}).call(this);
